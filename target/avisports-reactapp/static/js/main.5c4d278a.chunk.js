(this["webpackJsonpavisports-rest"]=this["webpackJsonpavisports-rest"]||[]).push([[0],{146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(53),c=a.n(i),l=(a(63),a(2)),s=a(13),o=a(4),m=a(5),u=a(7),d=a(6),h=a(8),p=function(e){var t;return t="Surfing"===e.subMenu[e.pageId].name?"/surfing":"/page/"+e.subMenu[e.pageId].id,r.a.createElement("li",null,r.a.createElement(l.b,{to:t},e.subMenu[e.pageId].name))},g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={navigationHomeName:"",navigationSubMenu:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("http://localhost:7003/sites/REST/resources/v1/aggregates/avisports/","navigation/Default?assetDepth=0&fields=Page(children,name,id);SiteNavigation(children)&expand=Page")).then((function(e){return e.json()})).then((function(t){var a=t.start,n=t[a].children[0].start,r=t[a].children[0][n].name,i=t[a].children[0][n].children;e.setState({navigationHomeName:r,navigationSubMenu:i})})).catch(console.log())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"header"},r.a.createElement("div",{className:"header-bar"},r.a.createElement("h1",{className:"logo"},r.a.createElement(l.b,{to:"/"},"AviSports-logo"))),r.a.createElement("ul",{className:"navigation"},r.a.createElement("li",null,r.a.createElement("a",{href:"/avisports-reactapp"},this.state.navigationHomeName)),this.state.navigationSubMenu.map((function(e){return r.a.createElement(p,{key:e.start,pageId:e.start,subMenu:e})})),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/articles"},"Articles")))))}}]),t}(n.Component),b=a(57),v=a(18),E=a.n(v),f=function(e){var t,a=e.teaserText,n=a.match(/(?<=cid_=)(.*)(?=&)/),i=a.match(/(?<=href=")(.*)(?=">)/);return t="1329851332601"===n[0]?a.replace(i[0].trim(),"/surfing"):a.replace(i[0].trim(),"/page/"+n[0]),r.a.createElement("div",{className:"post"},r.a.createElement("img",{src:e.homepageObj[e.teaserImageId].imageFile_bloblink_,alt:"",width:"206",height:"169"}),r.a.createElement("div",{className:"caption"}),r.a.createElement("div",{className:"descr"},E()(t),r.a.createElement("div",null,"\xa0")))},I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={homeBannerText:"",homeBannerUrl:"",homeTeasers:[],homepageObj:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("http://localhost:7003/sites/REST/resources/v1/aggregates/avisports/","Page/1327351719456?assetDepth=1&fields=Page(banner,teaserImages,teaserText,bannerText);AVIImage(imageFile,width,height)&expand=Page,AVIImage")).then((function(e){return e.json()})).then((function(t){var a=t.start,n=t[a].bannerText.trim(),r=t["AVIImage:"+t[a].banner.id].imageFile_bloblink_,i=t[a].teaserImages.map((function(e){return e.type+":"+e.id})),c=t[a].teaserText.map((function(e){return e})),l=i.map((function(e,t){return Object(b.a)({},{},{teaserText:c[t],imageId:e})}));e.setState({homeBannerText:n,homeBannerUrl:r,homeTeasers:l,homepageObj:t})})).catch(console.log())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"container",className:"home"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"banner"},r.a.createElement("img",{src:this.state.homeBannerUrl,alt:"",width:"940",height:"300"}),r.a.createElement("div",{className:"caption"}),r.a.createElement("div",{className:"teaser"},E()(this.state.homeBannerText.replace("_CSEMBEDTYPE_=internal&amp;_WRAPPER_=&amp;_PAGENAME_=avisports%2FAVIArticle%2FArticleLayout&amp;_cid_=1328196047338&amp;_c_=AVIArticle","/article/1328196047338"))))),r.a.createElement("div",{className:"center-column"},r.a.createElement("div",{className:"post-wrapper"},this.state.homeTeasers.map((function(t){return r.a.createElement(f,{key:t.imageId,teaserImageId:t.imageId,teaserText:t.teaserText,homepageObj:e.state.homepageObj})})))))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={pageId:a.props.match.params.pageId,pageAttributes:{},pageTitleContent1:"",pageTitleContent2:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"getPageAttributes",value:function(e){var t=this;fetch("".concat("http://localhost:7003/sites/REST/resources/v1/aggregates/avisports/","Page/").concat(e,"?assetDepth=2&fields=AVIArticle(id,relatedImage,abstract,headline);Page(banner,titleContent1,titleContent2,Assoc_Named_contentList1,Assoc_Named_contentList2);AVIImage(imageFile,smallThumbnail,ClargeThumbnail);YouTube(externalid)&expand=Page,AVIImage,AVIArticle,YouTube")).then((function(e){return e.json()})).then((function(e){var a=e.start,n=e["AVIImage:"+e[a].banner.id].imageFile_bloblink_;t.setState({pageAttributes:e,bannerUrl:n,pageTitleContent1:e[a].titleContent1,pageTitleContent2:e[a].titleContent2})})).catch(console.log())}},{key:"componentDidMount",value:function(){this.getPageAttributes(this.props.match.params.pageId)}},{key:"componentDidUpdate",value:function(e){var t=e.match.params.pageId,a=this.props.match.params.pageId;t!==a&&this.getPageAttributes(a)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"container",className:"section"},r.a.createElement("div",{className:"content"},r.a.createElement("img",{src:this.state.bannerUrl,alt:"banner"}))),r.a.createElement("div",null,r.a.createElement("h2",null,"The design is yet to be finalized !!")))}}]),t}(n.Component),y=function(e){return r.a.createElement("div",{className:"highlight"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},r.a.createElement("img",{className:"photo left",src:e.articleAttributes[e.articleImageId].imageFile_bloblink_,alt:"",width:"239",height:"170"})),r.a.createElement("div",{className:"descr"},r.a.createElement("h3",{className:"title"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},e.articleAttributes[e.articleId].headline)),e.articleAttributes[e.articleId].abstract))},N=function(e){return r.a.createElement("li",null,r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},e.articleAttributes[e.articleId].headline))},k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={articleId:a.props.match.params.articleId,articleAttributes:{},articleCategory:"",articleAuthor:"",articleHeadline:"",articleSubHeadline:"",articleBanner:"",articleBody:"",articleRelatedStories:[],articleRelatedLinks:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"getArticleAttributes",value:function(e){var t=this;fetch("".concat("http://localhost:7003/sites/REST/resources/v1/aggregates/avisports/","AVIArticle/").concat(e,"?assetDepth=2&fields=category,author,postDate,subheadline,relatedLinks,relatedStories,relatedImage,body;AVIArticle(id,headline,abstract,relatedImage);AVIImage(imageFile,caption,width,height,sidebarThumbnail)&expand=AVIArticle,AVIImage")).then((function(e){return e.json()})).then((function(e){var a=e.start,n=e["AVIImage:"+e[a].relatedImage.id].imageFile_bloblink_,r=e[a].relatedStories.map((function(e){return e.type+":"+e.id})),i=e[a].relatedLinks.map((function(e){return e.type+":"+e.id}));t.setState({articleAttributes:e,articleCategory:e[a].category,articleAuthor:e[a].author,articleHeadline:e[a].headline,articleSubHeadline:e[a].subheadline,articleBanner:n,articleBody:e[a].body,articleRelatedStories:r,articleRelatedLinks:i})})).catch(console.log())}},{key:"componentDidMount",value:function(){this.getArticleAttributes(this.props.match.params.articleId)}},{key:"componentDidUpdate",value:function(e){var t=e.match.params.articleId,a=this.props.match.params.articleId;t!==a&&this.getArticleAttributes(a)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"container",className:"article-layout"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"top-section"},r.a.createElement("span",{className:"section-title"},r.a.createElement(l.b,{to:"/"},this.state.articleCategory)),r.a.createElement("span",{className:"date"},"Tue, Apr 10 2012")),r.a.createElement("div",{className:"title-section"},r.a.createElement("h1",null,this.state.articleHeadline),r.a.createElement("h2",null,this.state.articleSubHeadline),r.a.createElement("span",{className:"author"},this.state.articleAuthor)),r.a.createElement("div",{className:"article"},r.a.createElement("div",{className:"article-image"},r.a.createElement("img",{src:this.state.articleBanner,alt:"",width:"617",height:"343"})),E()(this.state.articleBody))),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"box"},r.a.createElement("h2",{className:"title"},"Related Stories"),this.state.articleRelatedStories.map((function(t){return r.a.createElement(y,{key:t,articleId:t,articleImageId:"AVIImage:"+e.state.articleAttributes[t].relatedImage.id,articleAttributes:e.state.articleAttributes})}))),r.a.createElement("div",{className:"box"},r.a.createElement("h2",{className:"title"},"Related Links"),r.a.createElement("ul",null,this.state.articleRelatedLinks.map((function(t){return r.a.createElement(N,{key:t,articleId:t,articleAttributes:e.state.articleAttributes})}))))))}}]),t}(n.Component),S=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 - Page not found -"),r.a.createElement("div",{className:"aStyle"},r.a.createElement(l.b,{to:"/"},"Go Home")))},j=function(e){return r.a.createElement("div",{className:"post"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},r.a.createElement("img",{id:"surfing_"+e.index,className:"photo left",src:e.pageAttributes[e.articleImageId].imageFile_bloblink_,alt:"",width:"135",height:"90"})),r.a.createElement("h3",{className:"title"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},e.pageAttributes[e.articleId].headline)),r.a.createElement("p",{className:"descr"},e.pageAttributes[e.articleId].abstract))},O=function(e){return r.a.createElement("div",{className:"post"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},r.a.createElement("img",{className:"photo left",src:e.pageAttributes[e.articleImageId].imageFile_bloblink_,alt:"",width:"135",height:"90"})),r.a.createElement("div",{className:"descr left"},r.a.createElement("h3",{className:"title"},r.a.createElement(l.b,{to:"/article/"+e.articleId.replace("AVIArticle:","")},e.pageAttributes[e.articleId].headline)),e.pageAttributes[e.articleId].abstract))},C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={pageAttributes:{},bannerUrl:"",pageTitleContent1:"",pageTitleContent2:"",pageAssocContentList1:[],pageAssocContentList2:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("http://localhost:7003/sites/REST/resources/v1/aggregates/avisports/","Page/1329851332601?assetDepth=2&fields=AVIArticle(id,relatedImage,abstract,headline);Page(banner,titleContent1,titleContent2,Assoc_Named_contentList1,Assoc_Named_contentList2);AVIImage(imageFile,smallThumbnail,ClargeThumbnail);YouTube(externalid)&expand=Page,AVIImage,AVIArticle,YouTube")).then((function(e){return e.json()})).then((function(t){var a=t.start,n=t["AVIImage:"+t[a].banner.id].imageFile_bloblink_,r=t[a].Assoc_Named_contentList1.map((function(e){return e.type+":"+e.id})),i=t[a].Assoc_Named_contentList2.map((function(e){return e.type+":"+e.id}));e.setState({pageAttributes:t,bannerUrl:n,pageTitleContent1:t[a].titleContent1,pageTitleContent2:t[a].titleContent2,pageAssocContentList1:r,pageAssocContentList2:i})})).catch(console.log())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"container",className:"section"},r.a.createElement("div",{className:"content"},r.a.createElement("img",{src:this.state.bannerUrl,alt:"banner"})),r.a.createElement("div",{className:"center-column green"},r.a.createElement("div",{className:"post-wrapper"},r.a.createElement("h2",{className:"title"},this.state.pageTitleContent1),this.state.pageAssocContentList1.map((function(t,a){return r.a.createElement(j,{key:t,index:a,articleId:t,articleImageId:"AVIImage:"+e.state.pageAttributes[t].relatedImage.id,pageAttributes:e.state.pageAttributes})}))),r.a.createElement("div",{className:"post-wrapper"},r.a.createElement("h2",{className:"title"},this.state.pageTitleContent2),this.state.pageAssocContentList2.map((function(t){return r.a.createElement(O,{key:t,articleId:t,articleImageId:"AVIImage:"+e.state.pageAttributes[t].relatedImage.id,pageAttributes:e.state.pageAttributes})}))))))}}]),t}(n.Component),T=a(12),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).personalizeSubmitFormData=function(e){if(e.preventDefault(),a.state.occupation&&a.state.gender&&a.state.age){a.setState((function(){return{error:"",disabled:!0}}));var t="".concat("https://yaztestapp.azurewebsites.net/api/getCatRank"),n={rank:"true",contextFeatures:[{occupation:a.state.occupation,gender:a.state.gender,age:a.state.age}]};fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Ranking recevied from API: ",e),a.props.onSubmitResponse(e)})).catch(console.log())}else a.setState((function(){return{error:"Please select all the options"}}))},a.onAgeChange=function(e){var t=e;a.setState((function(){return{age:t}}))},a.onGenderChange=function(e){var t=e;a.setState((function(){return{gender:t}}))},a.onOccupationChange=function(e){var t=e;a.setState((function(){return{occupation:t}}))},a.state={occupation:"",gender:"",age:"",disabled:!1,error:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Personalizer Form"),this.state.error&&r.a.createElement("h4",{style:{color:"red"}},this.state.error),r.a.createElement("form",{onSubmit:this.personalizeSubmitFormData},r.a.createElement("div",{className:"form--radiogroup"},r.a.createElement("h3",null,"Age"),r.a.createElement(T.RadioGroup,{onChange:this.onAgeChange,horizontal:!0},r.a.createElement(T.ReversedRadioButton,{value:"below 30"},"Below 30"),r.a.createElement(T.ReversedRadioButton,{value:"above 30"},"Above 30"))),r.a.createElement("div",{className:"form--radiogroup"},r.a.createElement("h3",null,"Gender"),r.a.createElement(T.RadioGroup,{onChange:this.onGenderChange,horizontal:!0},r.a.createElement(T.ReversedRadioButton,{value:"male"},"Male"),r.a.createElement(T.ReversedRadioButton,{value:"female"},"Female"))),r.a.createElement("div",{className:"form--radiogroup"},r.a.createElement("h3",null,"Occupation"),r.a.createElement(T.RadioGroup,{onChange:this.onOccupationChange,horizontal:!0},r.a.createElement(T.ReversedRadioButton,{value:"employed"},"Employed"),r.a.createElement(T.ReversedRadioButton,{value:"self employed"},"Self-Employed"))),r.a.createElement("div",{style:{float:"left",marginRight:"64px"}},r.a.createElement("button",{className:"perSubmit"},"Submit"))))}}]),t}(n.Component),_=a(23),w=a.n(_),x=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:"article/"+e.article.id.substring(11)},e.article.name)))},V=a(56),D=a.n(V),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={categoryId:e.id,loading:!0,articlesData:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){var t,a,n,r;return w.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return"Tennis"===e.state.categoryId?t="1327351718806":"Baseball"===e.state.categoryId?t="1327351718484":"Surfing"===e.state.categoryId?t="1329801671850":"Skiing"===e.state.categoryId?t="1327351719208":"Running"===e.state.categoryId?t="1327351718403":"Football"===e.state.categoryId&&(t="1327351718595"),a="".concat("http://localhost:7003/sites/REST/resources/v1/search/sites/avisports/types/","AVIArticle/assets?field:ImmediateParents=").concat(t),i.next=4,w.a.awrap(fetch(a,{headers:{Accept:"application/json"}}));case 4:return n=i.sent,i.next=7,w.a.awrap(n.json());case 7:r=i.sent,console.log("Articles data: ",r.items),e.setState({articlesData:r.items,loading:!1});case 10:case"end":return i.stop()}}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.loading?r.a.createElement("div",{className:"perLoader"},r.a.createElement(D.a,{type:"ThreeDots",color:"#34547c",height:100,width:100})):r.a.createElement("div",{className:"perTable"},r.a.createElement("table",{id:"searchTable"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Top Stories In ",this.state.categoryId," (",this.state.articlesData.length,")")),this.state.articlesData.map((function(e){return r.a.createElement(x,{key:e.id,article:e})}))))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).sendReward=function(e){var t="".concat("https://yaztestapp.azurewebsites.net/api/sendReward"),n=a.state.ranking.eventId,r={reward:e,eventId:n};void 0===n?a.setState((function(){return{error:"Please submit the form first"}})):(a.setState((function(){return{error:"",disabled:!0}})),fetch(t,{method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Reward sent")})))},a.onLike=function(){a.sendReward(.9)},a.onDisLike=function(){a.sendReward(.1)},a.state={ranking:{},isSubmitted:void 0,loading:!1,disabled:!1,error:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"content-zone"},r.a.createElement("div",{id:"container",className:"section"},r.a.createElement("div",{className:"content"},this.state.error&&r.a.createElement("h4",{style:{color:"red"}},this.state.error),r.a.createElement(R,{onSubmitResponse:function(t){e.setState((function(){return{ranking:t,isSubmitted:!0,disabled:!1,error:""}}))}})),r.a.createElement("div",{style:{float:"left",width:"100%"}},r.a.createElement("button",{className:"perSubmit",onClick:this.onLike,disabled:this.state.disabled},this.state.disabled?"Liked":"Like"),r.a.createElement("button",{className:"perSubmit",onClick:this.onDisLike,disabled:this.state.disabled},this.state.disabled?"Disliked":"Dislike")),this.state.isSubmitted&&this.state.ranking.ranking.slice(0,3).map((function(e,t){return r.a.createElement(L,{key:e.id,id:e.id})})))))}}]),t}(n.Component),B=(a(146),a(147),function(){return r.a.createElement(l.a,{basename:"/avisports-reactapp"},r.a.createElement("div",{id:"main"},r.a.createElement(g,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(I,null)),r.a.createElement(s.a,{exact:!0,path:"/page/:pageId",render:function(e){return r.a.createElement(A,e)}}),r.a.createElement(s.a,{path:"/surfing"},r.a.createElement(C,null)),r.a.createElement(s.a,{exact:!0,path:"/article/:articleId",render:function(e){return r.a.createElement(k,e)}}),r.a.createElement(s.a,{exact:!0,path:"/articles"},r.a.createElement(P,null)),r.a.createElement(s.a,null,r.a.createElement(S,null)))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},58:function(e,t,a){e.exports=a(148)},63:function(e,t,a){},91:function(e,t){}},[[58,1,2]]]);
//# sourceMappingURL=main.5c4d278a.chunk.js.map